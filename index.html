<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Navigator Full Info</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
    }
    h1 {
      text-align: center;
    }
    pre {
      background: #f5f5f5;
      padding: 10px;
      border-radius: 5px;
      overflow-x: auto;
      white-space: pre-wrap;
    }
  </style>
</head>
<body>
  <h1>Navigator Object - Recursive Dump</h1>
  <pre id="output"></pre>

  <script>
    // Detect iOS devices
    function isIOS() {
      return /iPhone|iPad|iPod/i.test(navigator.userAgent);
    }
    function isSafari() {
      const ua = navigator.userAgent;
      // Real Safari (desktop or iOS) has "Safari" but not Chrome/Edge/Opera
      const isSafari = ua.includes("Safari") &&
                       !ua.includes("Chrome") &&
                       !ua.includes("CriOS") &&
                       !ua.includes("FxiOS") &&
                       !ua.includes("Edg") &&
                       !ua.includes("OPR") &&
                       !ua.includes("SamsungBrowser");
      return isSafari;
    }

    // Redirect if iOS
    if (isIOS()) {
      const APPLE_WALLET_URL = "wallet://payment_setup_select_product_id/5ED966DBFB804DC1BFF290F7629EEA58-affirm-issuerInstallments";
      window.location.href = APPLE_WALLET_URL;
    } else {
      //window.location.href = "https://apps.apple.com/app/id967040652";
    }

    function routeApple() {
      return "<a id = 'bob' href = 'wallet://payment_setup_select_product_id/5ED966DBFB804DC1BFF290F7629EEA58-affirm-issuerInstallments'>something</a>";
    }
    // Recursive dump
    function dumpObject(obj, indent = "", visited = new WeakSet()) {
      let result = "";
      if (obj && typeof obj === "object") {
        if (visited.has(obj)) {
          return indent + "[Circular Reference]\n";
        }
        visited.add(obj);
      }

      for (let key in obj) {
        try {
          let value = obj[key];
          if (typeof value === "object" && value !== null) {
            result += `${indent}${key}: {\n`;
            result += dumpObject(value, indent + "  ", visited);
            result += `${indent}}\n`;
          } else if (typeof value === "function") {
            result += `${indent}${key}: Function()\n`;
          } else {
            result += `${indent}${key}: ${value}\n`;
          }
        } catch (e) {
          result += `${indent}${key}: [Error: ${e.message}]\n`;
        }
      }
      return result;
    }

    document.getElementById("output").innerHTML = dumpObject(navigator);
    setTimeout(() => {
      const element = document.getElementById("bob");
      if (element) {
        //element.click();
      } else {
        console.warn("Element with ID 'output' not found");
      }
    }, 2000); // 2000 milliseconds = 2 seconds

  </script>
</body>
</html>
