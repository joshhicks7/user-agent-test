<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Navigator Full Info</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
    }
    h1 {
      text-align: center;
    }
    pre {
      background: #f5f5f5;
      padding: 10px;
      border-radius: 5px;
      overflow-x: auto;
      white-space: pre-wrap;
    }
  </style>
</head>
<body>
  <h1>Navigator Object - Recursive Dump</h1>
  <pre id="output"></pre>

  <script>
    // Detect iOS devices
    function isIOS() {
      return /iPhone|iPad|iPod/i.test(navigator.userAgent);
    }

    // Redirect if iOS
    if (isIOS()) {
      const APPLE_WALLET_URL = "https://wallet.apple.com/payment_setup_select_product_id/5ED966DBFB804DC1BFF290F7629EEA58-affirm-issuerInstallments";;
      window.open(APPLE_WALLET_URL);
    }

    // Recursive dump
    function dumpObject(obj, indent = "", visited = new WeakSet()) {
      let result = "";
      if (obj && typeof obj === "object") {
        if (visited.has(obj)) {
          return indent + "[Circular Reference]\n";
        }
        visited.add(obj);
      }

      for (let key in obj) {
        try {
          let value = obj[key];
          if (typeof value === "object" && value !== null) {
            result += `${indent}${key}: {\n`;
            result += dumpObject(value, indent + "  ", visited);
            result += `${indent}}\n`;
          } else if (typeof value === "function") {
            result += `${indent}${key}: Function()\n`;
          } else {
            result += `${indent}${key}: ${value}\n`;
          }
        } catch (e) {
          result += `${indent}${key}: [Error: ${e.message}]\n`;
        }
      }
      return result;
    }

    document.getElementById("output").textContent = dumpObject(navigator);
  </script>
</body>
</html>
